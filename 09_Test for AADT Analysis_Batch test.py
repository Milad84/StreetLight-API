#-------------------------------------------------------------------------------
# Name:        module1
# Purpose:
#
# Author:      MohammadalizadehkorM
#
# Created:     10/07/2025
# Copyright:   (c) MohammadalizadehkorM 2025
# Licence:     <your licence>
#-------------------------------------------------------------------------------

import requests

API_KEY = "YOUR API KEY"
INSIGHT_LOGIN_EMAIL = "YOUR EMAIL"

# 1. Create Zone Set from OSM IDs
ZONE_SET_URL = f"https://insight.streetlightdata.com/api/v2/zone_sets?key={API_KEY}"
zone_set_payload = {
    "osm_ids": [
4358672,
4358673,
4358675,
4358677,
4531212,
4531214,
4531215,
4531217,
4531218,
4531219,
4531220,
4531221,
4531222,
4531224,
4531225,
4531226,
4531227,
4531229,
4531230,
4531231,
4531232,
4531233,
4531236,
4531238,
4531240,
4531244,
4531247,
4531249,
4531250,
4531251,
4652282,
4652285,
8142388,
8148215,
8148218,
8148219,
8148222,
8148223,
15373433,
15373437,
15373438,
15373440,
15373441,
15373443,
15373445,
15373463,
15373466,
15373468,
15373470,
15373472,
15373475,
15373478,
15373482,
15373484,
15373490,
15373496,
15373501,
15373504,
15373506,
15373516,
15373538,
15373546,
15373565,
15373580,
15373588,
15373601,
15373607,
15373611,
15373614,
15373638,
15373658,
15373673,
15373676,
15373681,
15373685,
15373698,
15373716,
15373728,
15373731,
15373738,
15373764,
15373796,
15373800,
15373810,
15373814,
15373817,
15373820,
15373822,
15373828,
15373880,
15373891,
15373904,
15373922,
15373944,
15373967,
15373983,
15373986,
15374003,
15374018,
15374026,
15374033,
15374037,
15374056,
15374060,
15374062,
15374079,
15374083,
15374126,
15374148,
15374157,
15374171,
15374186,
15374188,
15374201,
15374208,
15374212,
15374220,
15374223,
15374260,
15374267,
15374269,
15374283,
15374285,
15374302,
15374305,
15374320,
15374328,
15374333,
15374339,
15374346,
15374348,
15374353,
15374361,
15374387,
15374392,
15374393,
15374397,
15374398,
15374400,
15374413,
15374414,
15374420,
15374437,
15374455,
15374482,
15374497,
15374517,
15374520,
15374533,
15374534,
15374536,
15374539,
15374577,
15374583,
15374586,
15374615,
15374655,
15374660,
15374692,
15374711,
15374752,
15374768,
15374777,
15374793,
15374804,
15374815,
15374834,
15374852,
15374867,
15374873,
15374876,
15374878,
15374882,
15374892,
15374895,
15374899,
15374903,
15374907,
15374917,
15374922,
15374931,
15374939,
15374944,
15374957,
15374964,
15374972,
15374976,
15374984,
15374988,
15374996,
15375013,
15375018,
15375032,
15375035,
15375045,
15375050,
15375063,
15375069,
15375075,
15375079,
15375087,
15375093,
15375098,
15375106,
15375144,
15375149,
15375154,
15375159,
15375185,
15375197,
15375203,
15375207,
15375228,
15375231,
15375233,
15375235,
15375239,
15375243,
15375249,
15375252,
15375257,
15375261,
15375273,
15375274

    ],
    "insight_login_email": INSIGHT_LOGIN_EMAIL
}
headers = {
    "accept": "application/json",
    "content-type": "application/json"
}

print("Creating zone set from OSM IDs...")
zone_set_response = requests.post(ZONE_SET_URL, json=zone_set_payload, headers=headers)
zone_set_data = zone_set_response.json()
zone_set_uuid = zone_set_data["uuid"]
print("Zone Set UUID:", zone_set_uuid)

# 2. Submit the AADT Analysis
ANALYSIS_URL = f"https://insight.streetlightdata.com/api/v2/analyses?key={API_KEY}"
analysis_payload = {
    "analysis_type": "AADT",
    "travel_mode_type": "All_Vehicles_LBS_Plus",
    "day_parts": "All Day|0023,Early AM|0005,Peak AM|0609,Mid-Day|1014,Peak PM|1518,Late PM|1923",
    "day_types": "Weekday|14,Weekend Day|67,All Days|17",
    "metric_type": "segment",
    "insight_login_email": INSIGHT_LOGIN_EMAIL,
    "analysis_name": "osm_id_Test_02",
    "description": "AADT for OSM-based zone set",
    "date_ranges": [
        {
            "start_date": "01/01/2024",
            "end_date": "12/31/2024"
        }
    ],
    "oz_sets": [
        {"uuid": zone_set_uuid}
    ],
    "aadt_year": 2024,
    "unit_of_measurement": "miles",
    "enable_visualization": True
}
print("Submitting AADT analysis...")
analysis_response = requests.post(ANALYSIS_URL, json=analysis_payload, headers=headers)
print("Analysis response:")
print(analysis_response.text)
